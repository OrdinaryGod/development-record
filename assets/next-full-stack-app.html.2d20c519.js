import{_ as o,r as p,o as l,c,a as n,b as s,d as t,e}from"./app.c43dec81.js";const i="/development-record/assets/clerk_dir.c267f9b1.png",r={},u=n("h1",{id:"next-jså…¨æ ˆåº”ç”¨å¼€å‘",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#next-jså…¨æ ˆåº”ç”¨å¼€å‘","aria-hidden":"true"},"#"),s(" Next.jså…¨æ ˆåº”ç”¨å¼€å‘")],-1),d=n("blockquote",null,[n("p",null,"æŠ€æœ¯æ ˆï¼šNext.js 13 + Tailwind CSS + MongoDB + Clerk")],-1),k=n("p",null,"è¦è¯´æœ€è¿‘æ¯”è¾ƒç«çš„APP åº”è¯¥å°±æ˜¯ Threads äº†ã€‚è¿™æ˜¯APPç•Œçš„æ–°æ˜Ÿï¼Œç”¨æˆ·æ•°é‡ç©å‘½ä¼¼çš„å¾€ä¸Šçªœâ€”â€”Metaæ——ä¸‹æ–°åº”ç”¨ç¨‹åºThreadsä¸Šçº¿çš„ä»…5å¤©ï¼Œç™»è®°ç”¨æˆ·äººæ•°å·²ç»è¶…è¿‡1äº¿ï¼ˆThreadsäºç¾å›½æ—¶é—´7æœˆ5æ—¥æ™šé—´ä¸Šå¸‚ï¼‰ã€‚",-1),v={href:"https://threads.woiq.xyz/",target:"_blank",rel:"noopener noreferrer"},m=n("h2",{id:"ä¼˜åŠ¿",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ä¼˜åŠ¿","aria-hidden":"true"},"#"),s(" ä¼˜åŠ¿")],-1),b={href:"https://turbo.build/pack",target:"_blank",rel:"noopener noreferrer"},q=e('<p>Next.js 13 æœ‰ä¸€äº›æ–°çš„ç”¨æ³•ï¼š</p><ol><li>ä¹‹å‰ç‰ˆæœ¬éƒ½æ˜¯ä½¿ç”¨ Page routerï¼ˆé¡µé¢è·¯ç”±ï¼‰ , Next.js 13ç‰ˆæœ¬å»ºè®®ä½¿ç”¨ App Routerï¼ˆåº”ç”¨è·¯ç”±ï¼‰ï¼Œè¿™ä¸ªæ¨¡å¼å†™èµ·æ¥ä¹ŸæŒºèˆ’æœï¼Œå…¶å®å°±æ˜¯ç›®å½•ç»“æ„å˜åŒ–ã€‚</li><li>Server Componentï¼ˆæœåŠ¡å™¨ç«¯ç»„ä»¶ï¼‰ å’Œ Client Componentï¼ˆå®¢æˆ·ç«¯ç»„ä»¶ï¼‰æ˜¯ Next.js 13çš„ä¸€ä¸ªç‰¹è‰²ï¼ŒæœåŠ¡å™¨ç»„ä»¶çš„å®æ—¶é‡æ–°åŠ è½½åŠŸèƒ½ç”¨èµ·æ¥å¾ˆçˆ½ã€‚</li><li>æµå¼å¤„ç†ï¼ˆä¹Ÿå«æµå¼ç¼–è¯‘ï¼‰ã€‚é¡µé¢åœ¨æ•´ä¸ªåŒ…è¢«è§£æä¹‹å‰å°±å¼€å§‹æ¸²æŸ“ã€‚è¿™ä¼šç¼©çŸ­äº¤äº’æ—¶é—´ (TTI)ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤§å‹åº”ç”¨ç¨‹åºã€‚</li><li>å›½é™…åŒ–è·¯ç”±ã€‚Next.js 13 æ”¯æŒè‡ªåŠ¨è¯­è¨€æ£€æµ‹å’Œå›½é™…åŒ–è·¯ç”±çš„ URL å‰ç¼€ã€‚è¿™ä½¿å¾—æ„å»ºå¤šè¯­è¨€ç½‘ç«™å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</li><li>ç¯å¢ƒå˜é‡æ”¯æŒã€‚Next.js 13 æ”¯æŒå°†ç¯å¢ƒå˜é‡åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ï¼Œåªè¦ç»™éœ€è¦çš„ç¯å¢ƒå˜é‡åŠ ä¸Š <code>NEXT_PUBLIC_</code> å‰ç¼€</li><li>Next.js 13 å†…ç½®äº†å¯¹ CSS å’Œ Sass çš„æ”¯æŒã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥ç›´æ¥åœ¨ JavaScript æ–‡ä»¶ä¸­å¯¼å…¥ CSS æ–‡ä»¶ã€‚å®ƒè¿˜æ”¯æŒ CSS æ¨¡å—ï¼Œè‡ªåŠ¨å°† CSS èŒƒå›´é™å®šåˆ°å„ä¸ªç»„ä»¶ã€‚</li><li>Next.js 13 æ”¯æŒé™æ€ç«™ç‚¹ç”Ÿæˆ (SSG)ï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥åœ¨æ„å»ºæ—¶é¢„æ¸²æŸ“é¡µé¢ã€‚è¿™å¯¹äºå†…å®¹è¾ƒå¤šçš„ç½‘ç«™ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå¯ä»¥æé«˜æ€§èƒ½å’Œæœç´¢å¼•æ“ä¼˜åŒ–ã€‚</li><li>Next.js 13 å…è®¸æ‚¨å°† API ç›´æ¥æ„å»ºåˆ° Next.js åº”ç”¨ç¨‹åºä¸­ã€‚æ‚¨å¯ä»¥åœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºServerlesså‡½æ•°ï¼Œç›¸å½“äºç‹¬ç«‹çš„å¾®æœåŠ¡<code>/pages/api</code>ï¼ˆè¿™æ˜¯é‡ç‚¹ï¼å…¨æ ˆå°±é è¿™ä¸ªï¼‰ã€‚</li></ol><h2 id="clerk" tabindex="-1"><a class="header-anchor" href="#clerk" aria-hidden="true">#</a> Clerk</h2>',3),h={href:"https://clerk.com/",target:"_blank",rel:"noopener noreferrer"},g=e(`<h2 id="å¼€å‘è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#å¼€å‘è¿‡ç¨‹" aria-hidden="true">#</a> å¼€å‘è¿‡ç¨‹</h2><p>åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå…¶å®å€’æ˜¯æ²¡æœ‰å¤ªå¤§çš„é˜»ç¢ï¼Œä¸»è¦æ˜¯éƒ¨ç½²é—®é¢˜ï¼ˆç­‰ä¸‹å†è¯´ ğŸ˜…ï¼‰</p><p>è¿™æ˜¯æˆ‘ç”¨åˆ°çš„ä¾èµ–åŒ…ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;@clerk/nextjs&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.23.2&quot;</span><span class="token punctuation">,</span>     <span class="token comment">//èº«ä»½éªŒè¯å’Œç”¨æˆ·ç®¡ç†çš„ä¸€ä¸ªå·¥å…·</span>
    <span class="token property">&quot;@clerk/themes&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.7.5&quot;</span><span class="token punctuation">,</span>      <span class="token comment">// Clerk è‡ªå®šä¹‰ä¸»é¢˜</span>
    <span class="token property">&quot;@hookform/resolvers&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@radix-ui/react-label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.0.2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@radix-ui/react-slot&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0.2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@radix-ui/react-tabs&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0.4&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@types/node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;20.4.9&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@types/react&quot;</span><span class="token operator">:</span> <span class="token string">&quot;18.2.20&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@types/react-dom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;18.2.7&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@uploadthing/react&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.2.1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;autoprefixer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10.4.14&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;class-variance-authority&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.7.0&quot;</span><span class="token punctuation">,</span>       <span class="token comment">// CSS in-TS åº“, shadcn å¤„ç†UIæ ·å¼çš„ç›¸å…³ä¾èµ–</span>
    <span class="token property">&quot;clsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.0.0&quot;</span><span class="token punctuation">,</span>       <span class="token comment">// ç”¨äºæœ‰æ¡ä»¶åœ°æ„é€ å­—ç¬¦ä¸², shadcn å¤„ç†UIæ ·å¼çš„ç›¸å…³ä¾èµ–</span>
    <span class="token property">&quot;cross-env&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.0.3&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;8.46.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint-config-next&quot;</span><span class="token operator">:</span> <span class="token string">&quot;13.4.13&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lucide-react&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.265.0&quot;</span><span class="token punctuation">,</span>     <span class="token comment">// ç”¨äº react åº”ç”¨ç¨‹åºçš„ lucide å›¾æ ‡åº“çš„å®ç°</span>
    <span class="token property">&quot;mongoose&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.4.3&quot;</span><span class="token punctuation">,</span>       <span class="token comment">// ä¸€ä¸ª Node å¹³å°çš„ MongoDB JSåº“, è½»ä¾¿ç®€æ´ï¼Œæ•°æ®åº“æ“ä½œAPIé½å…¨</span>
    <span class="token property">&quot;next&quot;</span><span class="token operator">:</span> <span class="token string">&quot;13.4.13&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;postcss&quot;</span><span class="token operator">:</span> <span class="token string">&quot;8.4.27&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;react&quot;</span><span class="token operator">:</span> <span class="token string">&quot;18.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;react-dom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;18.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;react-dropzone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^14.2.3&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;react-hook-form&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.45.4&quot;</span><span class="token punctuation">,</span>       <span class="token comment">// reactçš„ä¸€ä¸ªè½»é‡çº§è¡¨å•éªŒè¯åº“</span>
    <span class="token property">&quot;svix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.8.1&quot;</span><span class="token punctuation">,</span>       <span class="token comment">// å¤„ç† Webhook çš„ä¸€ä¸ªå·¥å…·</span>
    <span class="token property">&quot;tailwind-merge&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.14.0&quot;</span><span class="token punctuation">,</span>    <span class="token comment">// shadcn å¤„ç†UIæ ·å¼çš„ç›¸å…³ä¾èµ–</span>
    <span class="token property">&quot;tailwindcss&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.3.3&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tailwindcss-animate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0.6&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;typescript&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5.1.6&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;uploadthing&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.3.2&quot;</span><span class="token punctuation">,</span>        <span class="token comment">// æ–‡ä»¶å­˜å‚¨æœåŠ¡</span>
    <span class="token property">&quot;zod&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.21.4&quot;</span>        <span class="token comment">// ä»¥ TypeScript ä¸ºé¦–çš„æ¨¡å¼å£°æ˜å’ŒéªŒè¯åº“, å¼¥è¡¥äº† TypeScript æ— æ³•åœ¨è¿è¡Œæ—¶è¿›è¡Œæ ¡éªŒçš„é—®é¢˜, Zod æ—¢å¯ä»¥ç”¨åœ¨æœåŠ¡ç«¯ä¹Ÿå¯ä»¥è¿è¡Œåœ¨å®¢æˆ·ç«¯</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),y=n("code",null,".env.local",-1),_={href:"https://uploadthing.com/",target:"_blank",rel:"noopener noreferrer"},x={href:"https://mongoosejs.com/docs/index.html",target:"_blank",rel:"noopener noreferrer"},f=n("li",null,[n("p",null,"æ¥ä¸‹æ¥åœ¨ä¸­é—´ä»¶ä¸­é…ç½® Clerk å’Œ è·¯ç”±æ‹¦æˆªé…ç½®ï¼š")],-1),w=e(`<div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> authMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@clerk/nextjs&quot;</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/** 
 * æƒé™éªŒè¯ä¸­é—´ä»¶
 */</span>
<span class="token comment">// This example protects all routes including api/trpc routes</span>
<span class="token comment">// Please edit this to allow other routes to be public as needed.</span>
<span class="token comment">// See https://clerk.com/docs/nextjs/middleware for more information about configuring your middleware</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">authMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    publicRoutes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;/api/webhook/clerk&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    ignoredRoutes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;/api/webhook/clerk&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  matcher<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;/((?!.*\\\\..*|_next).*)&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/(api|trpc)(.*)&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),j={href:"https://next-intl-docs.vercel.app/docs/next-13",target:"_blank",rel:"noopener noreferrer"},C=e(`<div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> authMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@clerk/nextjs&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> createMiddleware <span class="token keyword">from</span> <span class="token string">&#39;next-intl/middleware&#39;</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/** 
 * æ ¹æ®ç”¨æˆ·åŒºåŸŸè¿›è¡Œå›½é™…åŒ–å¤„ç† å°†è·¯ç”±è½¬å‘åˆ°å¯¹åº”[lang]çš„è·¯ç”±  ä¾‹å¦‚ï¼šapp/[lang]/layout.js
 */</span>
<span class="token keyword">const</span> intlMiddleware <span class="token operator">=</span> <span class="token function">createMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  locales<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;en&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;zh&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ja&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  defaultLocale<span class="token operator">:</span> <span class="token string">&quot;en&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/** 
 * æƒé™éªŒè¯ä¸­é—´ä»¶
 */</span>
<span class="token comment">// This example protects all routes including api/trpc routes</span>
<span class="token comment">// Please edit this to allow other routes to be public as needed.</span>
<span class="token comment">// See https://clerk.com/docs/nextjs/middleware for more information about configuring your middleware</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">authMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">beforeAuth</span><span class="token operator">:</span> <span class="token punctuation">(</span>req<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">intlMiddleware</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  publicRoutes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;/:lang/sign-in&quot;</span><span class="token punctuation">,</span> <span class="token string">&#39;/api/webhook/clerk&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  ignoredRoutes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;/api/webhook/clerk&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  matcher<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;/((?!.*\\\\..*|_next).*)&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/(api|trpc)(.*)&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="highlight-lines"><br><div class="highlight-line">Â </div><br><br><br><br><div class="highlight-line">Â </div><div class="highlight-line">Â </div><div class="highlight-line">Â </div><div class="highlight-line">Â </div><br><br><br><br><br><br><br><br><div class="highlight-line">Â </div><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),N={start:"3"},S=n("code",null,"next.config.js",-1),T={href:"https://nextjs.org/docs/app/api-reference/components/image#remotepatterns",target:"_blank",rel:"noopener noreferrer"},I=e(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> nextConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ä»æœåŠ¡å™¨ç»„ä»¶æ†ç»‘ä¸­é€‰æ‹©é€€å‡ºç‰¹å®šä¾èµ–é¡¹å¹¶ä½¿ç”¨æœ¬æœº Node.js</span>
  <span class="token literal-property property">experimental</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">serverActions</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">serverComponentsExternalPackages</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;mongoose&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">eslint</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// Warning: This allows production builds to successfully complete even if your project has ESLint errors.</span>
    <span class="token literal-property property">ignoreDuringBuilds</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ä¸ºè·å–å¤–éƒ¨å›¾ç‰‡åšé…ç½®</span>
  <span class="token literal-property property">images</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">remotePatterns</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">protocol</span><span class="token operator">:</span> <span class="token string">&quot;https&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">&quot;img.clerk.com&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">protocol</span><span class="token operator">:</span> <span class="token string">&quot;https&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">&quot;images.clerk.dev&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">protocol</span><span class="token operator">:</span> <span class="token string">&quot;https&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">&quot;uploadthing.com&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">protocol</span><span class="token operator">:</span> <span class="token string">&quot;https&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">&quot;placehold.co&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> nextConfig
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>Clerk æ‹¦æˆªè·¯ç”±åä¼šé‡å®šå‘åˆ°å®ƒæŒ‡å®šçš„è·¯ç”±ï¼Œæ‰€ä»¥è¿˜éœ€è¦åšä»¥ä¸‹æ“ä½œï¼š</li></ol><ul><li>åœ¨ <code>.env.local</code> ä¸­é…ç½®ï¼š</li></ul><div class="language-.env.local line-numbers-mode" data-ext=".env.local"><pre class="language-.env.local"><code># Clerk é»˜è®¤å…¬å…±è·¯ç”±ï¼Œ å¦‚éœ€å›½é™…åŒ– åˆ™éœ€è¦åŠ ä¸Š /[lang]
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/onboarding
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ–‡ä»¶ç›®å½•ç»“æ„ï¼š</li></ul><p><img src="`+i+'" alt="å›¾ç‰‡"></p><div class="custom-container tip"><p class="custom-container-title">OK</p><p>emm... å…¶å®è¿™äº›é…ç½®åœ¨å®˜æ–¹æ–‡æ¡£ä¸­éƒ½æ˜¯æœ‰çš„ï¼Œå°±ä¸ä¸€ä¸€ä»‹ç»äº†ï¼Œåªéœ€è¦è®°ä½æŒ‰ç…§å®˜æ–¹æ–‡æ¡£çš„é…ç½®å°±æ²¡é—®é¢˜ã€‚ğŸ˜</p></div><h2 id="éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#éƒ¨ç½²" aria-hidden="true">#</a> éƒ¨ç½²</h2><p>ğŸ˜© å®³ï¼Œåˆ°äº†éƒ¨ç½²è¿™å°±å¤´ç–¼ã€‚ç®€å•è¯´ä¸‹ï¼Œå› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯ Jenkinså®¹å™¨ï¼Œæ‰€ä»¥Jenkinsæ‰§è¡Œæ„å»ºè„šæœ¬æ—¶ä¼šæœ‰ä¸€ä¸ªç”¨æˆ·é—®é¢˜â€”â€”é»˜è®¤æ˜¯Jenkinsç”¨æˆ·è€Œä¸æ˜¯å®¿ä¸»æœºç”¨æˆ·ï¼Œéšä¹‹å°±äº§ç”Ÿäº†æ–‡ä»¶æ“ä½œæƒé™é—®é¢˜ã€è„šæœ¬æ‰§è¡Œçš„å­çº¿ç¨‹åœ¨æ‰§è¡Œå®Œæ¯•åJenkinsä¼šè‡ªåŠ¨ kill å­çº¿ç¨‹ï¼Œè¿›è€Œå¯¼è‡´æœåŠ¡èµ·ä¸æ¥ï¼Œéƒ¨ç½²å°±ä¸ç”Ÿæ•ˆã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨è¿™ä¸Šé¢æˆ‘å°±å¥½å¥½è¢«æŠ˜è…¾äº†ä¸€ç•ªåŠŸå¤«ã€‚ğŸ˜¤</p><h2 id="é—®é¢˜æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#é—®é¢˜æ€»ç»“" aria-hidden="true">#</a> é—®é¢˜æ€»ç»“</h2><p>è®°å½•ä¸€ä¸‹é‡åˆ°çš„é—®é¢˜ï¼š</p><ol><li><p>å› ä¸ºè¦è¯·æ±‚æ•°æ®åº“æœåŠ¡ï¼Œå—é™äºäº‘æœåŠ¡å™¨æ€§èƒ½ï¼Œé¦–é¡µæ¸²æŸ“çš„æ—¶é—´ä¹Ÿä¼šå—å½±å“ï¼ˆæœ¬åœ°å¼€å‘çš„è¯æ˜¯å¾ˆå¿«çš„ï¼‰</p></li><li><p>ç”±äºæœ¬é¡¹ç›®ä¸­æœ‰ Clerk ç­‰æ‰˜ç®¡æœåŠ¡ï¼ŒNginx åå‘ä»£ç†é‚£é‡Œéœ€è¦é…ç½®ä¸€äº›headeré…ç½®ï¼Œä¸ç„¶ä¼šå¼•å‘ä¸€ç³»åˆ—401å’Œ404é—®é¢˜ã€‚</p></li><li><p>Clerk æ•è·åˆ°æœªæˆæƒè¯·æ±‚åä¼šè¿›è¡Œè·³è½¬ï¼Œè·³è½¬è¯·æ±‚çš„URLä¸­åè®®æ˜¯<code>http</code> ï¼Œè‹¥ç½‘ç«™æ˜¯<code>https</code>åè®®åˆ™ä¼šå¯¼è‡´è¯·æ±‚å¤±è´¥ï¼ˆéœ€è¦é€šè¿‡ Nginx é…ç½®80è½¬443ï¼‰</p></li><li><p>Next.js é»˜è®¤å…ˆåŠ è½½ <code>.env.local</code> æ–‡ä»¶ï¼Œç„¶ååŠ è½½å…¶å®ƒ <code>.env.*</code> æ–‡ä»¶çš„é¡ºåºæ˜¯æ ¹æ®<code>package.json</code>ä¸­ <code>&#39;script&#39;</code> å‘½ä»¤ä¸­æ¥çš„ï¼Œ<code>&#39;dev&#39;</code> å‘½ä»¤çš„è¯åŠ è½½ <code>.env.development</code>ï¼Œ<code>&#39;start&#39;</code> å‘½ä»¤åŠ è½½ <code>.env.production</code>ï¼Œæœ€ååŠ è½½ <code>.env</code> æ–‡ä»¶ã€‚</p></li><li><p>Jenkins è¿è¡Œé¡¹ç›®èƒ½åŠ›ä¸è¶³å¯èƒ½ç›´æ¥å°±æŒ‚äº†ï¼ˆå¯èƒ½æ˜¯JenkinsèŠ‚ç‚¹éœ€è¦å¢åŠ äº¦æˆ–è€…æ˜¯äº‘ä¸»æœºæ€§èƒ½ä¸è¶³ï¼‰</p></li><li><p>Jenkinsï¼ˆå°¤å…¶æ˜¯ docker ä¸­çš„ Jenkinsï¼‰æ‰§è¡Œå®Œè„šæœ¬åä¼š kill æ‰å­è¿›ç¨‹ï¼Œæ‰€ä»¥åœ¨å…¶ä¸­æ‰€èµ·çš„æœåŠ¡éœ€è¦ä¸ºæ‰§è¡Œå¯¹åº”ä»»åŠ¡çš„JenkinsèŠ‚ç‚¹é…ç½®ç¯å¢ƒå˜é‡æˆ–æ˜¯åœ¨è„šæœ¬ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆBUILD_IDï¼‰ç”¨äºæ›¿æ¢è¿›ç¨‹ID, ä»è€Œä½¿Jenkins ä¸èƒ½kill æœåŠ¡è¿›ç¨‹ã€‚</p></li><li><p>pm2 åœ¨å®¿ä¸»æœºç¯å¢ƒç›´æ¥ç®¡ç† Node åº”ç”¨æœåŠ¡ï¼Œéœ€è¦å…ˆ <code>stop</code> å† <code>restart</code> , æˆ–è€… <code>delete</code> åå†å¯åŠ¨ä¹Ÿå¯ä»¥ ï¼ˆå¦‚æœæ˜¯ Jenkins å®¹å™¨ç¯å¢ƒåˆ™ä¸éœ€è¦ï¼ŒJenkinsæ¯æ¬¡é‡å¯ä¹Ÿå°±ä¼šæ¸…ç©ºå­çº¿ç¨‹ä»»åŠ¡ï¼‰</p></li><li><p>æœåŠ¡ç«¯ç»„ä»¶éœ€è¦æ³¨æ„æ€§èƒ½ï¼ˆè¦æ³¨æ„ MongoDB çš„ <code>populate</code> æ“ä½œå¯¹æ€§èƒ½çš„å½±å“ï¼‰</p></li></ol><hr><p>æœ€åï¼Œå¦‚æœè¦éƒ¨ç½²åˆ°ç”Ÿäº§æ¨¡å¼çš„è¯ï¼Œ Clerk ä¸Šä¹Ÿå¯ä»¥åˆ‡åˆ°ç”Ÿäº§æ¨¡å¼ï¼Œç§˜é’¥è¦è®°å¾—æ ¹æ®ç¯å¢ƒæ›¿æ¢ä¸€ä¸‹ã€‚éœ€è¦æ³¨æ„çš„å°±æ˜¯ï¼Œå‡ ä¸ªåŸŸåè¦æ³¨å†Œå¥½ï¼Œä¸ç„¶å‡ºç°è½¬å‘é—®é¢˜ã€‚</p>',15);function L(U,P){const a=p("ExternalLinkIcon");return l(),c("div",null,[u,d,k,n("p",null,[s("è¿™ä¸ªé€Ÿåº¦å·²ç»æ‰“ç ´äº†ChatGPTçš„çºªå½•ï¼ˆä¸¤ä¸ªæœˆè¶…1äº¿ç”¨æˆ·ï¼‰ï¼Œç›®å‰Threadsæˆä¸ºå²ä¸Šç”¨æˆ·æ•°å¢é•¿é€Ÿåº¦æœ€å¿«çš„æ¶ˆè´¹è€…Appã€‚å¯¹æ­¤ï¼Œæˆ‘ä¹Ÿæ˜¯é¢‡æ„Ÿå…´è¶£ï¼Œä¹Ÿå»çœ‹äº†ä¸‹çƒ­é—¹ã€‚u1s1ï¼Œè¿™UIæ˜¯çœŸå¥½çœ‹ï¼æ‰€ä»¥ï¼Œå¿ƒç—’éš¾è€ä¹‹ä¸‹å°±æƒ³å€Ÿé‰´å®ƒæ¥å¼€å‘ä¸€ä¸ªè‡ªå·±çš„ç¤¾åŒºWebåº”ç”¨ "),n("a",v,[s("Woiq-threads"),t(a)])]),m,n("p",null,[s("Next.js 13 æœ‰ä¸€ä¸ªå¤§å‡çº§å°±æ˜¯ï¼Œæ‰“åŒ…å·¥å…·ä½¿ç”¨äº† "),n("a",b,[s("Turbopack"),t(a)]),s(", Turbopack æ˜¯é’ˆå¯¹ JavaScript å’Œ TypeScript ä¼˜åŒ–çš„å¢é‡æ‰“åŒ…å·¥å…·ï¼Œç”± Webpack çš„åˆ›å»ºè€… Tobias Koppers å’Œ Next.js å›¢é˜Ÿä½¿ç”¨ Rust ç¼–å†™ã€‚åœ¨å¤§å‹åº”ç”¨ä¸Šï¼Œå®ƒçš„æ›´æ–°é€Ÿåº¦æ¯” Vite å¿« 10 å€ï¼Œæ¯”Webpack å¿« 700 å€ã€‚åœ¨æ›´å¤§çš„åº”ç”¨ä¸Šï¼Œé€šå¸¸ä¼šæ¯” Vite å¿« 20 å€ï¼ˆå’Œ vite å¯¹æ¯”çš„è¿™æ•°å€¼ä¸å¤ªå¯ä¿¡ï¼Œæˆ‘è§‰å¾—åº”è¯¥æœ‰ç‚¹ä¸ºäº†é½æ•´è€Œå¤¸å¤§äº†ï¼Œä½†è¿˜æ˜¯æ¯”viteæ›´å¿«æ²¡æ¯›ç—…ï¼ï¼‰ã€‚")]),q,n("p",null,[s("æˆ‘è¿™é‡Œä½¿ç”¨çš„ "),n("a",h,[s("Clerk"),t(a)]),s(" éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ‰˜ç®¡å®‰å…¨ç™»å½•é‰´æƒå·¥å…·ï¼Œä¹Ÿè´Ÿè´£ç”¨æˆ·ç®¡ç†ï¼Œå†…å«äº†ç”¨æˆ·ç®¡ç†ç»„ä»¶ï¼Œç™»å½•ã€æ³¨å†Œç»„ä»¶ã€‚UIéƒ½å¾ˆæ¼‚äº®ã€‚æ¥å…¥äº† clerk ä¹‹åï¼Œç™»å½•é‰´æƒè¿™å—å°±å˜å¾—æå…¶å®¹æ˜“äº†ï¼Œå…è´¹ç‰ˆå¯¹äºè½»åº”ç”¨çš„ä¸ªäººå¼€å‘è€…æ¥è¯´å°±å¾ˆé€‚åˆï¼ŒåŠŸèƒ½éƒ½è¶³å¤Ÿäº†ã€‚")]),g,n("ol",null,[n("li",null,[n("p",null,[s("é¦–å…ˆé…ç½®å¥½ Tailwindçš„è‡ªå®šä¹‰ä¸»é¢˜ï¼Œç„¶ååœ¨ "),y,s(" æ–‡ä»¶ä¸­é…ç½® Clerk ç§˜é’¥ã€"),n("a",_,[s("Uploadthing"),t(a)]),s(" æ–‡ä»¶ä¸Šä¼ ç§˜é’¥ã€MongoDB è¿æ¥ä¿¡æ¯ï¼ˆä½¿ç”¨ "),n("a",x,[s("Mongoose"),t(a)]),s(" ï¼‰ç­‰ç­‰ã€‚(å…·ä½“é…ç½®å‚è€ƒå®˜æ–¹æ–‡æ¡£å°±å¯ä»¥)")])]),f]),w,n("p",null,[s("å¦‚æœéœ€è¦æ”¯æŒå›½é™…åŒ–ï¼ˆnextå†…ç½®"),n("a",j,[s("å›½é™…åŒ–"),t(a)]),s("ï¼‰ï¼Œåˆ™æ˜¯è¿™æ ·ï¼š")]),C,n("ol",N,[n("li",null,[S,s(" é…ç½®ï¼ˆä¸»è¦æ˜¯æœ‰å›¾ç‰‡ä¸Šä¼ ï¼Œéœ€è¦ç”¨åˆ°å¤–éƒ¨å›¾ç‰‡ï¼Œå…·ä½“å‚è€ƒ "),n("a",T,[s("remotepatterns"),t(a)]),s("ï¼‰ï¼š")])]),I])}const E=o(r,[["render",L],["__file","next-full-stack-app.html.vue"]]);export{E as default};
